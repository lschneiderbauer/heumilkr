<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Clarke-Wright algorithm, a Capacitated Vehicle Routing Problem solver — clarke_wright • heumilkr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Clarke-Wright algorithm, a Capacitated Vehicle Routing Problem solver — clarke_wright"><meta name="description" content="Finds a quasi-optimal solution to the Capacitated Vehicle Routing
Problem (CVRP). It is assumed that all demands will be satisfied by a
single source."><meta property="og:description" content="Finds a quasi-optimal solution to the Capacitated Vehicle Routing
Problem (CVRP). It is assumed that all demands will be satisfied by a
single source."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">heumilkr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/clarke_wright_performance.html">Clarke Wright Performance Benchmarks</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lschneiderbauer/heumilkr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Clarke-Wright algorithm, a Capacitated Vehicle Routing Problem solver</h1>
      <small class="dont-index">Source: <a href="https://github.com/lschneiderbauer/heumilkr/blob/master/R/clarke_wright.R" class="external-link"><code>R/clarke_wright.R</code></a></small>
      <div class="d-none name"><code>clarke_wright.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Finds a quasi-optimal solution to the Capacitated Vehicle Routing
Problem (CVRP). It is assumed that all demands will be satisfied by a
single source.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">clarke_wright</span><span class="op">(</span></span>
<span>  <span class="va">demand</span>,</span>
<span>  <span class="va">distances</span>,</span>
<span>  <span class="va">vehicles</span>,</span>
<span>  restrictions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>vehicle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="op">)</span>, site <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-demand">demand<a class="anchor" aria-label="anchor" href="#arg-demand"></a></dt>
<dd><p>A numeric vector consisting of "demands" indexed by sites.
The <code>i</code>th entry refers to the demand of site <code>i</code> (and the length
of the vector equals the number of sites <code>N</code> with demands). The
units of demand values need to match the units of vehicle capacity values.
<code>NA</code> values are not allowed.</p></dd>


<dt id="arg-distances">distances<a class="anchor" aria-label="anchor" href="#arg-distances"></a></dt>
<dd><p>An object of class <code>dist</code>, created by <code><a href="https://rdrr.io/r/stats/dist.html" class="external-link">stats::dist()</a></code>, with
<code>(N + 1)</code> locations describing the distances between individual
sites. The first index refers to the source site. The <code>(i+1)</code>th
index refers to site <code>i</code> (as defined by <code>demand</code>).</p></dd>


<dt id="arg-vehicles">vehicles<a class="anchor" aria-label="anchor" href="#arg-vehicles"></a></dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code> describing available vehicle types and their respective
capacities. One row per vehicle type. The data frame is expected to have
two columns:</p><ul><li><p><code>n</code> - Number of available vehicles. This can be set to <code>NA</code> if the
number is "infinite" (i.e. effectively the maximal integer value
on your machine.).
It is recommended to keep at least one vehicle type as "infinite",
otherwise the solver might raise a run time error due to initially
not having enough vehicles available (even though the final
solution might satisfy the availability restrictions).</p></li>
<li><p><code>caps</code> - The vehicle capacity in same units as <code>demand</code>.</p></li>
</ul><p>The order of the <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code> is relevant and determines the prioritization
of vehicle assignments to runs (in case two or more vehicle types are
eligible for assignment the "first" vehicle is chosen). In a typical scenario
"more expensive" vehicles should be further down in the list (so the cheaper
one is chosen in case there is doubt). Since higher capacity vehicles
usually involve higher costs sorting the data frame by capacity is usually
a good rule of thumb.</p></dd>


<dt id="arg-restrictions">restrictions<a class="anchor" aria-label="anchor" href="#arg-restrictions"></a></dt>
<dd><p>An optional <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code> that allows to define vehicle type restrictions for
particular sites in the form of a blacklist.
The data frame is expected to have two columns:</p><ul><li><p><code>vehicle</code> - The vehicle type index.</p></li>
<li><p><code>site</code> - The site index (i.e. the index of the <code>demand</code> vector)</p></li>
</ul><p>Each row defines a restriction: vehicle type <code>vehicle</code> can not approach site
<code>site</code>. Defaults to an empty <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code>, i.e. no restrictions are enforced.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a "<code>heumilkr_solution</code>" object, a <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code> with one row per
site-run combination bestowed with additional attributes. Its columns
consist of:</p><ul><li><p><code>site</code> - The site index (i.e. the index of the <code>demand</code> vector) associated
to the run.</p></li>
<li><p><code>run</code> - Identifies the run the site is assigned to.</p></li>
<li><p><code>order</code>  - Integer values providing the visiting order within each run.</p></li>
<li><p><code>vehicle</code> - The vehicle type index (as provided in <code>vehicles</code>) associated
to the run.</p></li>
<li><p><code>load</code> - The actual load in units of <code>demand</code> on the particular run.</p></li>
<li><p><code>distance</code> - The travel distance of the particular run.</p></li>
</ul><p>Unless a site demand exceeds the vehicle capacities it is always assigned
to only a single run.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See the original paper,
Clarke, G. and Wright, J.R. (1964) <a href="https://doi.org/10.1287/opre.12.4.568" class="external-link">doi:10.1287/opre.12.4.568</a>
,
for a detailed explanation of the Clarke-Wright algorithm.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">demand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">positions</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    pos_x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    pos_y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">clarke_wright</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">demand</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/stats/dist.html" class="external-link">dist</a></span><span class="op">(</span><span class="va">positions</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>n <span class="op">=</span> <span class="cn">NA_integer_</span>, caps <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   site run order vehicle load distance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0   0     0       0    5 4.828427</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    1   0     1       0    5 4.828427</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    2   1     0       0    6 8.485281</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    3   1     1       0    6 8.485281</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lukas Schneiderbauer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

